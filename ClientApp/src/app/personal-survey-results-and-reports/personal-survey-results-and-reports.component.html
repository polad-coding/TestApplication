<div id="send-email-modal-container" *ngIf="sendEmailModalIsVisible">
  <div id="send-email-modal" (click)="StopEventPropagation($event)">
    <div class="modal-row">
      <span>From:</span>
      <span>{{user.email}}</span>
    </div>
    <div class="modal-row">
      <span>To:</span>
      <input type="text" [(ngModel)]="currentPractitionerFullName" disabled />
    </div>
    <div class="modal-row">
      <span>Object*:</span>
      <input [(ngModel)]="messageSubject" (keyup)="CheckIfSendEmailModalFieldsAreCorrect()" />
    </div>
    <div class="modal-row">
      <span>Message*:</span>
      <textarea [(ngModel)]="messageBody" id="message-textarea" (keyup)="CheckIfSendEmailModalFieldsAreCorrect()" ></textarea>
    </div>
    <div class="modal-row">
      <button [ngClass]="{'button-is-active':sendEmailModalFieldsAreCorrect,'button-is-disabled':!sendEmailModalFieldsAreCorrect}" id="send-message-modal-button" (click)="EmailMessageToPractitioner($event)">Send <img src="../../assets/KP-logo-accessories--png/00-0-Drop-090.svg" /></button>
    </div>
  </div>
</div>
<div id="survey-results-and-reports-table-container">
  <div id="survey-results-and-reports-titles">
    <div class="title">
      <p>Code</p>
    </div>
    <div class="title">
      <p>Taken on</p>
    </div>
    <div class="title">
      <p>Practitioner</p>
    </div>
    <div class="title">
      <p>Get your report</p>
    </div>
    <div class="title">
      <p></p>
    </div>
  </div>
  <div id="survey-results-and-reports-surveys">
    <div class="survey-result-row" *ngFor="let surveyResult of surveys">
      <div class="survey-result-row-white-cell">
        <p>{{surveyResult.code}}</p>
      </div>
      <div class="survey-result-row-white-cell" *ngIf="surveyResult.takenOn != null && surveyResult.takenOn != ''">
        <p>{{surveyResult.takenOn | date:'yyyy MMM d'}}</p>
      </div>
      <div class="survey-result-row-white-cell" *ngIf="(surveyResult.takenOn == null || surveyResult.takenOn == '') && surveyResult.firstStagePassed == false">
        <p>...</p>
      </div>
      <div class="survey-result-row-white-cell" *ngIf="(surveyResult.takenOn == null || surveyResult.takenOn == '') && surveyResult.firstStagePassed == true">
        <p>Survey in progress</p>
      </div>
      <div class="survey-result-row-white-cell practitioner-name-email-cell" [attr.data-practitionerId]="surveyResult.practitionerId" *ngIf="surveyResult.practitionerFullName != null && surveyResult.practitionerFullName != ''">
        <span>{{surveyResult.practitionerFullName}}</span>
        <span class="send-email-container" (click)="OpenSendEmailModal($event, surveyResult)">@</span>
      </div>
      <div class="survey-result-row-white-cell" *ngIf="surveyResult.practitionerFullName == null || surveyResult.practitionerFullName == ''">
        <p>Choose a practitioner</p>
      </div>
      <button *ngIf="surveyResult.isCompleated" class="survey-result-row-blue-cell" (click)="GenerateIndividualReport(surveyResult.surveyId)">
        Download your individual report
      </button>
      <button *ngIf="surveyResult.isCompleated" class="survey-result-row-blue-cell" (click)="TransferToSynthesisPage(surveyResult.surveyId)">
        See synthesis
      </button>
      <button *ngIf="surveyResult.isCompleated == false && surveyResult.firstStagePassed" class="survey-result-row-blue-cell" (click)="ResumeSurvey(surveyResult.surveyId)">
        Resume survey
      </button>
      <button *ngIf="surveyResult.isCompleated == false && surveyResult.firstStagePassed == false" class="survey-result-row-blue-cell" (click)="ResumeSurvey(surveyResult.surveyId)">
        Take survey
      </button>
      <div *ngIf="!surveyResult.isCompleated" class="survey-result-empty-cell">

      </div>
    </div>
    <div class="survey-result-row">
      <div (click)="RedirectToEnterCodePage()" class="survey-result-row-white-cell">
        <p id="enter-your-code-button">Enter your code</p>
      </div>
      <div class="survey-result-row-white-cell">
        <p>- - - - - -</p>
      </div>
      <div class="survey-result-row-white-cell">
        <p id="choose-a-practitioner-button">Choose a practitioner</p>
      </div>
      <div class="survey-result-empty-cell">

      </div>
      <div class="survey-result-empty-cell">
      </div>
    </div>
  </div>
</div>
<div id="get-code-section">
  <button (click)="SwitchToGetCodesTab()">Get a code</button>
  <div id="see-policy-container">
    <img src="../../assets/KP-logo-accessories--png/0-00-KP-Lock.svg" />
    <a>See privacy policy</a>
  </div>
</div>
